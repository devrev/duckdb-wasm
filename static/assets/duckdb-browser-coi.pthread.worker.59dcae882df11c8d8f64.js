/*! For license information please see duckdb-browser-coi.pthread.worker.59dcae882df11c8d8f64.js.LICENSE.txt */
"use strict";(()=>{var e,t=Object.create,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,s=(e=function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):e),l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),u=(e,s,l)=>(l=null!=e?t(o(e)):{},((e,t,o,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of a(t))!i.call(e,o)&&undefined!==o&&r(e,o,{get:()=>t[o],enumerable:!(s=n(t,o))||s.enumerable});return e})(!s&&e&&e.__esModule?l:r(l,"default",{value:e,enumerable:!0}),e)),c=l((()=>{})),f=l((()=>{})),d=l((()=>{})),h=l((()=>{})),_=l((()=>{})),p=l(((e,t)=>{var r=(()=>{var e=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(e=e||__filename),function(t={}){function r(){return P.buffer!=B.buffer&&Y(),B}function n(){return P.buffer!=B.buffer&&Y(),x}function a(){return P.buffer!=B.buffer&&Y(),W}function o(){return P.buffer!=B.buffer&&Y(),q}function i(){return P.buffer!=B.buffer&&Y(),j}function l(){return P.buffer!=B.buffer&&Y(),K}var u,p,b=t;b.ready=new Promise(((e,t)=>{u=e,p=t}));var g,m,y=Object.assign({},b),w="./this.program",v=(e,t)=>{throw t},A="object"==typeof window,k="function"==typeof importScripts,E="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,T=b.ENVIRONMENT_IS_PTHREAD||!1,U="";function M(e){return b.locateFile?b.locateFile(e,U):U+e}if(E){var D=f(),F=d();let e;U=k?F.dirname(U)+"/":__dirname+"/",g=(e,t)=>(e=de(e)?new URL(e):F.normalize(e),D.readFileSync(e,t?void 0:"utf8")),m=e=>{var t=g(e,!0);return t.buffer||(t=new Uint8Array(t)),t},!b.thisProgram&&process.argv.length>1&&(w=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),v=(e,t)=>{throw process.exitCode=e,t},b.inspect=()=>"[Emscripten Module object]";try{e=c()}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}global.Worker=e.Worker}else(A||k)&&(k?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),e&&(U=e),U=0!==U.indexOf("blob:")?U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):"",E||(g=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(m=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)})));E&&typeof performance>"u"&&(global.performance=h().performance);var R=console.log.bind(console),H=console.error.bind(console);E&&(R=(...e)=>D.writeSync(1,e.join(" ")+"\n"),H=(...e)=>D.writeSync(2,e.join(" ")+"\n"));var I,S=b.print||R,N=b.printErr||H;Object.assign(b,y),y=null,b.arguments&&b.arguments,b.thisProgram&&(w=b.thisProgram),b.quit&&(v=b.quit),b.wasmBinary&&(I=b.wasmBinary),"object"!=typeof WebAssembly&&se("no native wasm support detected");var P,C,O,B,x,W,L,q,j,K,z=!1;function G(e,t){e||se(t)}function Y(){var e=P.buffer;b.HEAP8=B=new Int8Array(e),b.HEAP16=W=new Int16Array(e),b.HEAPU8=x=new Uint8Array(e),b.HEAPU16=L=new Uint16Array(e),b.HEAP32=q=new Int32Array(e),b.HEAPU32=j=new Uint32Array(e),b.HEAPF32=new Float32Array(e),b.HEAPF64=K=new Float64Array(e)}var V=b.INITIAL_MEMORY||16777216;if(T)P=b.wasmMemory;else if(b.wasmMemory)P=b.wasmMemory;else if(!((P=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),E&&N("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Y(),V=P.buffer.byteLength;var J=[],X=[],Z=[],$=[],Q=!1;function ee(){Q=!0,!T&&Se(X)}function te(e){J.unshift(e)}var re=0,ne=null,ae=null;function oe(e){var t;re++,null==(t=b.monitorRunDependencies)||t.call(b,re)}function ie(e){var t;if(re--,null==(t=b.monitorRunDependencies)||t.call(b,re),0==re&&(null!==ne&&(clearInterval(ne),ne=null),ae)){var r=ae;ae=null,r()}}function se(e){var t;null==(t=b.onAbort)||t.call(b,e),N(e="Aborted("+e+")"),z=!0,O=1,e+=". Build with -sASSERTIONS for more info.",Q&&cr();var r=new WebAssembly.RuntimeError(e);throw p(r),r}var le,ue,ce,fe=e=>e.startsWith("data:application/octet-stream;base64,"),de=e=>e.startsWith("file://");function he(e){if(e==le&&I)return new Uint8Array(I);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}function _e(e,t,r){return function(e){return I||!A&&!k||"function"!=typeof fetch?Promise.resolve().then((()=>he(e))):fetch(e,{credentials:"same-origin"}).then((t=>{if(!t.ok)throw"failed to load wasm binary file at '"+e+"'";return t.arrayBuffer()})).catch((()=>he(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then((e=>e)).then(r,(e=>{N("failed to asynchronously prepare wasm: ".concat(e)),se(e)}))}function pe(e){this.name="ExitStatus",this.message="Program terminated with exit(".concat(e,")"),this.status=e}fe(le="./duckdb-coi.wasm")||(le=M(le));var be=e=>{e.terminate(),e.onmessage=e=>{}},ge=e=>{var t=Ie.pthreads[e];Ie.returnWorkerToPool(t)},me=(e,t)=>(n().fill(0,e,e+t),e),ye=e=>{var t=Ie.getNewWorker();if(!t)return 6;Ie.runningWorkers.push(t),Ie.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return E&&t.unref(),t.postMessage(r,e.transferList),0},we=0,ve=()=>Oe||we>0,Ae=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ke=(e,t,r)=>{for(var n=(t>>>=0)+r,a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&Ae)return Ae.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,a):e.subarray(t,a));for(var o="";t<a;){var i=e[t++];if(128&i){var s=63&e[t++];if(192!=(224&i)){var l=63&e[t++];if((i=224==(240&i)?(15&i)<<12|s<<6|l:(7&i)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(i);else{var u=i-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&i)<<6|s)}else o+=String.fromCharCode(i)}return o},Ee=(e,t)=>(e>>>=0)?ke(n(),e,t):"",Te={varargs:void 0,get(){var e=o()[+Te.varargs>>>2>>>0];return Te.varargs+=4,e},getp:()=>Te.get(),getStr:e=>Ee(e)},Ue=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,Me=function(e,t){var r=arguments.length-2,n=arguments;return(e=>{var t=dr(),r=e();return hr(t),r})((()=>{for(var a=r,o=_r(8*a),i=o>>>3,s=0;s<r;s++){var u=n[2+s];l()[i+s>>>0]=u}return or(e,a,o,t)}))};function De(e){var t;if(T)return Me(0,1,e);O=e,ve()||(Ie.terminateAllThreads(),null==(t=b.onExit)||t.call(b,e),z=!0),v(e,new pe(e))}var Fe=(e,t)=>{if(O=e,T)throw Ne(e),"unwind";De(e)},Re=Fe,He=e=>{if(e instanceof pe||"unwind"==e)return O;v(1,e)},Ie={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init(){T?Ie.initWorker():Ie.initMainThread()},initMainThread(){for(var e=4;e--;)Ie.allocateUnusedWorker();te((()=>{oe(),Ie.loadWasmModuleToAllWorkers((()=>ie()))}))},initWorker(){Oe=!1},setExitStatus:e=>O=e,terminateAllThreads__deps:["$terminateWorker"],terminateAllThreads:()=>{for(var e of Ie.runningWorkers)be(e);for(var e of Ie.unusedWorkers)be(e);Ie.unusedWorkers=[],Ie.runningWorkers=[],Ie.pthreads=[]},returnWorkerToPool:e=>{var t=e.pthread_ptr;delete Ie.pthreads[t],Ie.unusedWorkers.push(e),Ie.runningWorkers.splice(Ie.runningWorkers.indexOf(e),1),e.pthread_ptr=0,ir(t)},receiveObjectTransfer(e){},threadInitTLS(){Ie.tlsInitFunctions.forEach((e=>e()))},loadWasmModuleToWorker:t=>new Promise((r=>{t.onmessage=e=>{var n=e.data,a=n.cmd;if(n.targetThread&&n.targetThread!=er()){var o=Ie.pthreads[n.targetThread];o?o.postMessage(n,n.transferList):N('Internal error! Worker sent a message "'.concat(a,'" to target pthread ').concat(n.targetThread,", but that thread no longer exists!"))}else"checkMailbox"===a?kt():"spawnThread"===a?ye(n):"cleanupThread"===a?ge(n.thread):"killThread"===a?(e=>{var t=Ie.pthreads[e];delete Ie.pthreads[e],be(t),ir(e),Ie.runningWorkers.splice(Ie.runningWorkers.indexOf(t),1),t.pthread_ptr=0})(n.thread):"cancelThread"===a?(e=>{Ie.pthreads[e].postMessage({cmd:"cancel"})})(n.thread):"loaded"===a?(t.loaded=!0,E&&!t.pthread_ptr&&t.unref(),r(t)):"alert"===a?alert("Thread ".concat(n.threadId,": ").concat(n.text)):"setimmediate"===n.target?t.postMessage(n):"callHandler"===a?b[n.handler](...n.args):a&&N("worker sent an unknown command ".concat(a))},t.onerror=e=>{throw N("".concat("worker sent an error!"," ").concat(e.filename,":").concat(e.lineno,": ").concat(e.message)),e},E&&(t.on("message",(e=>t.onmessage({data:e}))),t.on("error",(e=>t.onerror(e))));var n=[];for(var a of["onExit","onAbort","print","printErr"])b.hasOwnProperty(a)&&n.push(a);t.postMessage({cmd:"load",handlers:n,urlOrBlob:b.mainScriptUrlOrBlob||e,wasmMemory:P,wasmModule:C})})),loadWasmModuleToAllWorkers(e){if(T)return e();Promise.all(Ie.unusedWorkers.map(Ie.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker(){var e,t=M("duckdb_wasm.worker.js");e=new Worker(t),Ie.unusedWorkers.push(e)},getNewWorker:()=>(0==Ie.unusedWorkers.length&&(Ie.allocateUnusedWorker(),Ie.loadWasmModuleToWorker(Ie.unusedWorkers[0])),Ie.unusedWorkers.pop())};b.PThread=Ie;var Se=e=>{for(;e.length>0;)e.shift()(b)};function Ne(e){if(T)return Me(1,0,e);Re(e)}b.establishStackSpace=()=>{var e=er(),t=i()[e+52>>>2>>>0],r=i()[e+56>>>2>>>0];fr(t,t-r),hr(t)};var Pe,Ce=[];b.invokeEntryPoint=(e,t)=>{var r,n=(e=>{var t=Ce[e];return t||(e>=Ce.length&&(Ce.length=e+1),Ce[e]=t=Pe.get(e)),t})(e)(t);r=n,ve()?Ie.setExitStatus(r):sr(r)};var Oe=b.noExitRuntime||!0;function Be(e,t,r,n){return T?Me(2,1,e,t,r,n):xe(e,t,r,n)}function xe(e,t,r,n){if(e>>>=0,t>>>=0,r>>>=0,n>>>=0,typeof SharedArrayBuffer>"u")return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(T&&0===a.length)return Be(e,t,r,n);var o={startRoutine:r,pthread_ptr:e,arg:n,transferList:a};return T?(o.cmd="spawnThread",postMessage(o,a),0):ye(o)}function We(e,t,r,n,a){if(T)return Me(3,1,e,t,r,n,a);r>>>=0,n>>>=0,a>>>=0;for(var i=0,s=(t>>>=0)?o()[t>>>2>>>0]:0,l=t?o()[t+4>>>2>>>0]:0,u=r?o()[r>>>2>>>0]:0,c=r?o()[r+4>>>2>>>0]:0,f=n?o()[n>>>2>>>0]:0,d=n?o()[n+4>>>2>>>0]:0,h=0,_=0,p=0,b=0,g=0,m=0,y=(t?o()[t>>>2>>>0]:0)|(r?o()[r>>>2>>>0]:0)|(n?o()[n>>>2>>>0]:0),w=(t?o()[t+4>>>2>>>0]:0)|(r?o()[r+4>>>2>>>0]:0)|(n?o()[n+4>>>2>>>0]:0),v=function(e,t,r,n){return e<32?t&n:r&n},A=0;A<e;A++){var k=1<<A%32;if(v(A,y,w,k)){var E=Te.getStreamFromFD(A),U=Te.DEFAULT_POLLMASK;if(E.stream_ops.poll){var M=-1;a&&(M=1e3*((t?o()[a>>>2>>>0]:0)+(t?o()[a+4>>>2>>>0]:0)/1e6)),U=E.stream_ops.poll(E,M)}1&U&&v(A,s,l,k)&&(A<32?h|=k:_|=k,i++),4&U&&v(A,u,c,k)&&(A<32?p|=k:b|=k,i++),2&U&&v(A,f,d,k)&&(A<32?g|=k:m|=k,i++)}}return t&&(o()[t>>>2>>>0]=h,o()[t+4>>>2>>>0]=_),r&&(o()[r>>>2>>>0]=p,o()[r+4>>>2>>>0]=b),n&&(o()[n>>>2>>>0]=g,o()[n+4>>>2>>>0]=m),i}function Le(){se("missing function: $SOCKFS")}function qe(){se("missing function: $FS")}Le.stub=!0,qe.stub=!0;var je=e=>{var t=Le.getSocket(e);if(!t)throw new qe.ErrnoError(8);return t},Ke=e=>(255&e)+"."+(e>>8&255)+"."+(e>>16&255)+"."+(e>>24&255),ze=e=>{var t="",r=0,n=0,a=0,o=0,i=0,s=0,l=[65535&e[0],e[0]>>16,65535&e[1],e[1]>>16,65535&e[2],e[2]>>16,65535&e[3],e[3]>>16],u=!0,c="";for(s=0;s<5;s++)if(0!==l[s]){u=!1;break}if(u){if(c=Ke(l[6]|l[7]<<16),-1===l[5])return(t="::ffff:")+c;if(0===l[5])return"0.0.0.0"===c&&(c=""),"0.0.0.1"===c&&(c="1"),(t="::")+c}for(r=0;r<8;r++)0===l[r]&&(r-a>1&&(i=0),a=r,i++),i>n&&(o=r-(n=i)+1);for(r=0;r<8;r++)n>1&&0===l[r]&&r>=o&&r<o+n?r===o&&(t+=":",0===o&&(t+=":")):(t+=Number(ar(65535&l[r])).toString(16),t+=r<7?":":"");return t},Ge=(e,t)=>{var r,n=a()[e>>>1>>>0],i=ar((P.buffer!=B.buffer&&Y(),L)[e+2>>>1>>>0]);switch(n){case 2:if(16!==t)return{errno:28};r=o()[e+4>>>2>>>0],r=Ke(r);break;case 10:if(28!==t)return{errno:28};r=[o()[e+8>>>2>>>0],o()[e+12>>>2>>>0],o()[e+16>>>2>>>0],o()[e+20>>>2>>>0]],r=ze(r);break;default:return{errno:5}}return{family:n,addr:r,port:i}},Ye=e=>{for(var t=e.split("."),r=0;r<4;r++){var n=Number(t[r]);if(isNaN(n))return null;t[r]=n}return(t[0]|t[1]<<8|t[2]<<16|t[3]<<24)>>>0},Ve=e=>parseInt(e),Je=e=>{var t,r,n,a,o=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((t=(e=e.replace(new RegExp("[.]","g"),":")).split(":"))[t.length-4]=Ve(t[t.length-4])+256*Ve(t[t.length-3]),t[t.length-3]=Ve(t[t.length-2])+256*Ve(t[t.length-1]),t=t.slice(0,t.length-2)):t=e.split(":"),n=0,a=0,r=0;r<t.length;r++)if("string"==typeof t[r])if("Z"===t[r]){for(a=0;a<8-t.length+1;a++)o[r+a]=0;n=a-1}else o[r+n]=nr(parseInt(t[r],16));else o[r+n]=t[r];return[o[1]<<16|o[0],o[3]<<16|o[2],o[5]<<16|o[4],o[7]<<16|o[6]]},Xe={address_map:{id:1,addrs:{},names:{}},lookup_name(e){var t,r=Ye(e);if(null!==r||null!==(r=Je(e)))return e;if(Xe.address_map.addrs[e])t=Xe.address_map.addrs[e];else{var n=Xe.address_map.id++;G(n<65535,"exceeded max address mappings of 65535"),t="172.29."+(255&n)+"."+(65280&n),Xe.address_map.names[t]=e,Xe.address_map.addrs[e]=t}return t},lookup_addr:e=>Xe.address_map.names[e]?Xe.address_map.names[e]:null},Ze=(e,t,r)=>{if(r&&0===e)return null;var n=Ge(e,t);if(n.errno)throw new qe.ErrnoError(n.errno);return n.addr=Xe.lookup_addr(n.addr)||n.addr,n};function $e(e,t,r,n,a,o){if(T)return Me(4,1,e,t,r,n,a,o);t>>>=0,r>>>=0;var i=je(e),s=Ze(t,r);return i.sock_ops.bind(i,s.addr,s.port),0}function Qe(e,t,r,n,a,o){if(T)return Me(5,1,e,t,r,n,a,o);t>>>=0,r>>>=0;var i=je(e),s=Ze(t,r);return i.sock_ops.connect(i,s.addr,s.port),0}function et(e,t,r,n){if(T)return Me(6,1,e,t,r,n);t>>>=0}function tt(e,t,r){return T?Me(7,1,e,t,r):(r>>>=0,Te.varargs=r,0)}function rt(e,t){if(T)return Me(8,1,e,t);t>>>=0}function nt(e,t,r){if(T)return Me(9,1,e,t,r);Ue(t,r)}var at=(e,t,r,n)=>{if(!(n>0))return 0;for(var a=r>>>=0,o=r+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(r>=o)break;t[r++>>>0]=s}else if(s<=2047){if(r+1>=o)break;t[r++>>>0]=192|s>>6,t[r++>>>0]=128|63&s}else if(s<=65535){if(r+2>=o)break;t[r++>>>0]=224|s>>12,t[r++>>>0]=128|s>>6&63,t[r++>>>0]=128|63&s}else{if(r+3>=o)break;t[r++>>>0]=240|s>>18,t[r++>>>0]=128|s>>12&63,t[r++>>>0]=128|s>>6&63,t[r++>>>0]=128|63&s}}return t[r>>>0]=0,r-a},ot=(e,t,r)=>at(e,n(),t,r);function it(e,t,r){if(T)return Me(10,1,e,t,r);t>>>=0,r>>>=0}var st=(e,t,r,n,i)=>{switch(t){case 2:r=Ye(r),me(e,16),i&&(o()[i>>>2>>>0]=16),a()[e>>>1>>>0]=t,o()[e+4>>>2>>>0]=r,a()[e+2>>>1>>>0]=nr(n);break;case 10:r=Je(r),me(e,28),i&&(o()[i>>>2>>>0]=28),o()[e>>>2>>>0]=t,o()[e+8>>>2>>>0]=r[0],o()[e+12>>>2>>>0]=r[1],o()[e+16>>>2>>>0]=r[2],o()[e+20>>>2>>>0]=r[3],a()[e+2>>>1>>>0]=nr(n);break;default:return 5}return 0};function lt(e,t,r,n,a,o){if(T)return Me(11,1,e,t,r,n,a,o);t>>>=0,r>>>=0;var i=je(e);return i.daddr?(st(t,i.family,Xe.lookup_name(i.daddr),i.dport,r),0):-53}function ut(e,t,r,n,a,i){if(T)return Me(12,1,e,t,r,n,a,i);n>>>=0,a>>>=0;var s=je(e);return 1===t&&4===r?(o()[n>>>2>>>0]=s.error,o()[a>>>2>>>0]=4,s.error=null,0):-50}function ct(e,t,r){return T?Me(13,1,e,t,r):(r>>>=0,Te.varargs=r,0)}function ft(e,t){if(T)return Me(14,1,e,t);e>>>=0,t>>>=0}function dt(e,t,r){if(T)return Me(15,1,e,t,r);t>>>=0}function ht(e,t,r,n){if(T)return Me(16,1,e,t,r,n);t>>>=0,r>>>=0}function _t(e,t,r,n){if(T)return Me(17,1,e,t,r,n);t>>>=0,n>>>=0,Te.varargs=n}function pt(e,t,r,a,o,i){if(T)return Me(18,1,e,t,r,a,o,i);t>>>=0,r>>>=0,o>>>=0,i>>>=0;var s=je(e),l=s.sock_ops.recvmsg(s,r);return l?(o&&st(o,s.family,Xe.lookup_name(l.addr),l.port,i),n().set(l.buffer,t>>>0),l.buffer.byteLength):0}function bt(e,t,r,n){if(T)return Me(19,1,e,t,r,n);t>>>=0,n>>>=0}function gt(e){if(T)return Me(20,1,e);e>>>=0}function mt(e,t,r,n,a,o){if(T)return Me(21,1,e,t,r,n,a,o);t>>>=0,r>>>=0,a>>>=0,o>>>=0}function yt(e,t,r){if(T)return Me(22,1,e,t,r)}function wt(e,t){if(T)return Me(23,1,e,t);e>>>=0,t>>>=0}function vt(e,t,r){if(T)return Me(24,1,e,t,r);t>>>=0}function At(e){if(e>>>=0,"function"==typeof Atomics.waitAsync){Atomics.waitAsync(o(),e>>>2,e).value.then(kt);var t=e+128;Atomics.store(o(),t>>>2,1)}}b.__emscripten_thread_mailbox_await=At;var kt=()=>{var e=er();e&&(At(e),(e=>{if(!z)try{e(),(()=>{if(!ve())try{T?sr(O):Re(O)}catch(e){He(e)}})()}catch(e){He(e)}})(lr))};b.checkMailbox=kt;var Et,Tt=[];Et=()=>performance.timeOrigin+performance.now();var Ut=e=>{var t=(e-P.buffer.byteLength+65535)/65536;try{return P.grow(t),Y(),1}catch(e){}},Mt={},Dt=()=>{if(!Dt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:w||"./this.program"};for(var t in Mt)void 0===Mt[t]?delete e[t]:e[t]=Mt[t];var r=[];for(var t in e)r.push("".concat(t,"=").concat(e[t]));Dt.strings=r}return Dt.strings},Ft=function(e,t){if(T)return Me(25,1,e,t);e>>>=0,t>>>=0;var n=0;return Dt().forEach(((a,o)=>{var s=t+n;i()[e+4*o>>>2>>>0]=s,((e,t)=>{for(var n=0;n<e.length;++n)r()[t++>>>0>>>0]=e.charCodeAt(n);r()[t>>>0>>>0]=0})(a,s),n+=a.length+1})),0},Rt=function(e,t){if(T)return Me(26,1,e,t);e>>>=0,t>>>=0;var r=Dt();i()[e>>>2>>>0]=r.length;var n=0;return r.forEach((e=>n+=e.length+1)),i()[t>>>2>>>0]=n,0};function Ht(e){return T?Me(27,1,e):52}function It(e,t){if(T)return Me(28,1,e,t);t>>>=0;var n=0;return 0==e?n=2:(1==e||2==e)&&(n=64),r()[t>>>0>>>0]=2,a()[t+2>>>1>>>0]=1,ce=[n>>>0,(ue=n,+Math.abs(ue)>=1?ue>0?+Math.floor(ue/4294967296)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],o()[t+8>>>2>>>0]=ce[0],o()[t+12>>>2>>>0]=ce[1],ce=[0,(ue=0,+Math.abs(ue)>=1?ue>0?+Math.floor(ue/4294967296)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],o()[t+16>>>2>>>0]=ce[0],o()[t+20>>>2>>>0]=ce[1],0}function St(e,t,r,n,a,o){return T?Me(29,1,e,t,r,n,a,o):(t>>>=0,r>>>=0,Ue(n,a),o>>>=0,52)}function Nt(e,t,r,n,a,o){return T?Me(30,1,e,t,r,n,a,o):(t>>>=0,r>>>=0,Ue(n,a),o>>>=0,52)}function Pt(e,t,r,n){return T?Me(31,1,e,t,r,n):(t>>>=0,r>>>=0,n>>>=0,52)}function Ct(e,t,r,n,a){return T?Me(32,1,e,t,r,n,a):(Ue(t,r),a>>>=0,70)}function Ot(e){return T?Me(33,1,e):52}var Bt=[null,[],[]],xt=(e,t)=>{var r=Bt[e];0===t||10===t?((1===e?S:N)(ke(r,0)),r.length=0):r.push(t)};function Wt(e,t,r,a){if(T)return Me(34,1,e,t,r,a);t>>>=0,r>>>=0,a>>>=0;for(var o=0,s=0;s<r;s++){var l=i()[t>>>2>>>0],u=i()[t+4>>>2>>>0];t+=8;for(var c=0;c<u;c++)xt(e,n()[l+c>>>0]);o+=u}return i()[a>>>2>>>0]=o,0}function Lt(e,t,r,n){if(T)return Me(35,1,e,t,r,n);e>>>=0,t>>>=0,n>>>=0;var a,s=0,l=0,u=0,c=0,f=0,d=0;function h(e,t,r,n,a,s){var l,u,c;return u=10===e?28:16,a=10===e?ze(a):Ke(a),l=ur(u),G(!st(l,e,a,s)),c=ur(32),o()[c+4>>>2>>>0]=e,o()[c+8>>>2>>>0]=t,o()[c+12>>>2>>>0]=r,i()[c+24>>>2>>>0]=n,i()[c+20>>>2>>>0]=l,o()[c+16>>>2>>>0]=10===e?28:16,o()[c+28>>>2>>>0]=0,c}if((r>>>=0)&&(u=o()[r>>>2>>>0],c=o()[r+4>>>2>>>0],f=o()[r+8>>>2>>>0],d=o()[r+12>>>2>>>0]),f&&!d&&(d=2===f?17:6),!f&&d&&(f=17===d?2:1),0===d&&(d=6),0===f&&(f=1),!e&&!t)return-2;if(-1088&u||0!==r&&2&o()[r>>>2>>>0]&&!e)return-1;if(32&u)return-2;if(0!==f&&1!==f&&2!==f)return-7;if(0!==c&&2!==c&&10!==c)return-6;if(t&&(t=Ee(t),l=parseInt(t,10),isNaN(l)))return 1024&u?-2:-8;if(!e)return 0===c&&(c=2),1&u||(s=2===c?rr(2130706433):[0,0,0,1]),a=h(c,f,d,null,s,l),i()[n>>>2>>>0]=a,0;if(e=Ee(e),null!==(s=Ye(e)))if(0===c||2===c)c=2;else{if(!(10===c&&8&u))return-2;s=[0,0,rr(65535),s],c=10}else if(null!==(s=Je(e))){if(0!==c&&10!==c)return-2;c=10}return null!=s?(a=h(c,f,d,e,s,l),i()[n>>>2>>>0]=a,0):4&u?-2:(e=Xe.lookup_name(e),s=Ye(e),0===c?c=2:10===c&&(s=[0,0,rr(65535),s]),a=h(c,f,d,null,s,l),i()[n>>>2>>>0]=a,0)}var qt=e=>(qt=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>(e.set(crypto.getRandomValues(new Uint8Array(e.byteLength))),e);if(E)try{var e=s("crypto");if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}se("initRandomDevice")})())(e),jt=e=>e%4==0&&(e%100!=0||e%400==0),Kt=[31,29,31,30,31,30,31,31,30,31,30,31],zt=[31,28,31,30,31,30,31,31,30,31,30,31],Gt=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Yt=(e,t)=>{r().set(e,t>>>0)};function Vt(e,t,r,n){e>>>=0,t>>>=0,r>>>=0,n>>>=0;var a=i()[n+40>>>2>>>0],s={tm_sec:o()[n>>>2>>>0],tm_min:o()[n+4>>>2>>>0],tm_hour:o()[n+8>>>2>>>0],tm_mday:o()[n+12>>>2>>>0],tm_mon:o()[n+16>>>2>>>0],tm_year:o()[n+20>>>2>>>0],tm_wday:o()[n+24>>>2>>>0],tm_yday:o()[n+28>>>2>>>0],tm_isdst:o()[n+32>>>2>>>0],tm_gmtoff:o()[n+36>>>2>>>0],tm_zone:a?Ee(a):""},l=Ee(r),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in u)l=l.replace(new RegExp(c,"g"),u[c]);var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];function h(e,t,r){for(var n="number"==typeof e?e.toString():e||"";n.length<t;)n=r[0]+n;return n}function _(e,t){return h(e,t,"0")}function p(e,t){function r(e){return e<0?-1:e>0?1:0}var n;return 0===(n=r(e.getFullYear()-t.getFullYear()))&&0===(n=r(e.getMonth()-t.getMonth()))&&(n=r(e.getDate()-t.getDate())),n}function b(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var t=((e,t)=>{for(var r=new Date(e.getTime());t>0;){var n=jt(r.getFullYear()),a=r.getMonth(),o=(n?Kt:zt)[a];if(!(t>o-r.getDate()))return r.setDate(r.getDate()+t),r;t-=o-r.getDate()+1,r.setDate(1),a<11?r.setMonth(a+1):(r.setMonth(0),r.setFullYear(r.getFullYear()+1))}return r})(new Date(e.tm_year+1900,0,1),e.tm_yday),r=new Date(t.getFullYear(),0,4),n=new Date(t.getFullYear()+1,0,4),a=b(r),o=b(n);return p(a,t)<=0?p(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var m={"%a":e=>f[e.tm_wday].substring(0,3),"%A":e=>f[e.tm_wday],"%b":e=>d[e.tm_mon].substring(0,3),"%B":e=>d[e.tm_mon],"%C":e=>_((e.tm_year+1900)/100|0,2),"%d":e=>_(e.tm_mday,2),"%e":e=>h(e.tm_mday,2," "),"%g":e=>g(e).toString().substring(2),"%G":e=>g(e),"%H":e=>_(e.tm_hour,2),"%I":e=>{var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),_(t,2)},"%j":e=>_(e.tm_mday+((e,t)=>{for(var r=0,n=0;n<=t;r+=e[n++]);return r})(jt(e.tm_year+1900)?Kt:zt,e.tm_mon-1),3),"%m":e=>_(e.tm_mon+1,2),"%M":e=>_(e.tm_min,2),"%n":()=>"\n","%p":e=>e.tm_hour>=0&&e.tm_hour<12?"AM":"PM","%S":e=>_(e.tm_sec,2),"%t":()=>"\t","%u":e=>e.tm_wday||7,"%U":e=>{var t=e.tm_yday+7-e.tm_wday;return _(Math.floor(t/7),2)},"%V":e=>{var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var r=(e.tm_wday+371-e.tm_yday)%7;4!=r&&(3!=r||!jt(e.tm_year))&&(t=1)}}else{t=52;var n=(e.tm_wday+7-e.tm_yday-1)%7;(4==n||5==n&&jt(e.tm_year%400-1))&&t++}return _(t,2)},"%w":e=>e.tm_wday,"%W":e=>{var t=e.tm_yday+7-(e.tm_wday+6)%7;return _(Math.floor(t/7),2)},"%y":e=>(e.tm_year+1900).toString().substring(2),"%Y":e=>e.tm_year+1900,"%z":e=>{var t=e.tm_gmtoff;return(t>=0?"+":"-")+("0000"+(t=(t=Math.abs(t)/60)/60*100+t%60)).slice(-4)},"%Z":e=>e.tm_zone,"%%":()=>"%"};for(var c in l=l.replace(/%%/g,"\0\0"),m)l.includes(c)&&(l=l.replace(new RegExp(c,"g"),m[c](s)));var y=function(e,t,r){var n=Gt(e)+1,a=new Array(n);at(e,a,0,a.length);return a}(l=l.replace(/\0\0/g,"%"));return y.length>t?0:(Yt(y,e),y.length-1)}Ie.init();var Jt,Xt=[De,Ne,Be,We,$e,Qe,et,tt,rt,nt,it,lt,ut,ct,ft,dt,ht,_t,pt,bt,gt,mt,yt,wt,vt,Ft,Rt,Ht,It,St,Nt,Pt,Ct,Ot,Wt,Lt],Zt={E:function(e){tr(e>>>=0,!k,1,!A,65536,!1),Ie.threadInitTLS()},s:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):ge(e)},ga:xe,$:We,ea:$e,ca:Qe,X:et,b:tt,W:rt,x:nt,R:it,Z:lt,_:ut,q:ct,T:ft,S:dt,U:ht,r:_t,aa:pt,P:bt,k:gt,ba:mt,n:yt,V:wt,l:vt,oa:()=>1,da:function(e,t,r){if((e>>>=0)==(t>>>=0))setTimeout((()=>kt()));else if(T)postMessage({targetThread:e,cmd:"checkMailbox"});else{var n=Ie.pthreads[e];if(!n)return;n.postMessage({cmd:"checkMailbox"})}},M:function(e,t,r,n){t>>>=0,n>>>=0,Tt.length=r;for(var a=n>>>3,o=0;o<r;o++)Tt[o]=l()[a+o>>>0];var i=Xt[e];Ie.currentProxiedOperationCallerThread=t;var s=i.apply(null,Tt);return Ie.currentProxiedOperationCallerThread=0,s},v:At,u:function(e){e>>>=0,E&&Ie.pthreads[e].ref()},e:()=>{se("")},H:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.createDirectory(b,e,t)},I:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.checkDirectory(b,e,t)},F:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.listDirectoryEntries(b,e,t)},G:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.removeDirectory(b,e,t)},j:function(e){return globalThis.DUCKDB_RUNTIME.closeFile(b,e)},C:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.checkFile(b,e,t)},w:function(e){return globalThis.DUCKDB_RUNTIME.getLastFileModificationTime(b,e)},D:function(e,t,r,n){return e>>>=0,r>>>=0,globalThis.DUCKDB_RUNTIME.moveFile(b,e,t,r,n)},K:function(e,t){return globalThis.DUCKDB_RUNTIME.openFile(b,e,t)},f:function(e,t,r,n){return t>>>=0,globalThis.DUCKDB_RUNTIME.readFile(b,e,t,r,n)},J:function(e,t){return globalThis.DUCKDB_RUNTIME.truncateFile(b,e,t)},g:function(e,t,r,n){return t>>>=0,globalThis.DUCKDB_RUNTIME.writeFile(b,e,t,r,n)},L:function(e){return globalThis.DUCKDB_RUNTIME.getDefaultDataProtocol(e)},B:function(e,t){return e>>>=0,globalThis.DUCKDB_RUNTIME.glob(b,e,t)},i:function(e){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(b,e)},N:function(e,t,r,n,a,o){return e>>>=0,r>>>=0,a>>>=0,globalThis.DUCKDB_RUNTIME.callScalarUDF(b,e,t,r,n,a,o)},m:()=>{},pa:()=>Date.now(),t:()=>{throw we+=1,"unwind"},ha:function(){return 4294901760},c:Et,ia:()=>E?_().cpus().length:navigator.hardwareConcurrency,na:function(e){e>>>=0;var t=n().length;if(e<=t)return!1;var r,a=4294901760;if(e>a)return!1;for(var o=1;o<=4;o*=2){var i=t*(1+.2/o);i=Math.min(i,e+100663296);var s=Math.min(a,(r=Math.max(e,i))+(65536-r%65536)%65536);if(Ut(s))return!0}return!1},ka:Ft,la:Rt,fa:Re,d:Ht,ma:It,z:St,y:Nt,p:Pt,A:Ct,Q:Ot,h:Wt,o:Lt,O:function(e,t){return e>>>=0,t>>>=0,qt(n().subarray(e>>>0,e+t>>>0)),0},Y:function(e,t,r,n,a,o,i){r>>>=0,a>>>=0;var s=Ge(e>>>=0,t);if(s.errno)return-6;var l=s.port,u=s.addr,c=!1;if(r&&n){var f;if(1&i||!(f=Xe.lookup_addr(u))){if(8&i)return-2}else u=f;ot(u,r,n)+1>=n&&(c=!0)}return a&&o&&ot(l=""+l,a,o)+1>=o&&(c=!0),c?-12:0},a:P||b.wasmMemory,ja:function(e,t,r,n,a){return Vt(e>>>=0,t>>>=0,r>>>=0,n>>>=0)}},$t=function(){var e={a:Zt};function t(e,t){return $t=function(e){var t=e=>()=>e()>>>0,r=e=>t=>e(t)>>>0;return(e=Object.assign({},e)).eb=t(e.eb),e.__errno_location=t(e.__errno_location),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.ob=r(e.ob),e.sb=t(e.sb),e.ub=r(e.ub),e}($t=e.exports),(e=>{Ie.tlsInitFunctions.push(e)})($t.db),Pe=$t.sa,function(e){X.unshift(e)}($t.qa),C=t,ie(),$t}if(oe(),b.instantiateWasm)try{return b.instantiateWasm(e,t)}catch(e){N("Module.instantiateWasm callback failed with error: ".concat(e)),p(e)}return function(e,t,r,n){return e||"function"!=typeof WebAssembly.instantiateStreaming||fe(t)||E||"function"!=typeof fetch?_e(t,r,n):fetch(t,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,r).then(n,(function(e){return N("wasm streaming compile failed: ".concat(e)),N("falling back to ArrayBuffer instantiation"),_e(t,r,n)}))))}(I,le,e,(function(e){t(e.instance,e.module)})).catch(p),{}}(),Qt=b._main=(e,t)=>(Qt=b._main=$t.ra)(e,t),er=(b._duckdb_web_fs_glob_add_path=e=>(b._duckdb_web_fs_glob_add_path=$t.ta)(e),b._duckdb_web_clear_response=()=>(b._duckdb_web_clear_response=$t.ua)(),b._duckdb_web_fail_with=e=>(b._duckdb_web_fail_with=$t.va)(e),b._duckdb_web_reset=e=>(b._duckdb_web_reset=$t.wa)(e),b._duckdb_web_connect=()=>(b._duckdb_web_connect=$t.xa)(),b._duckdb_web_disconnect=e=>(b._duckdb_web_disconnect=$t.ya)(e),b._duckdb_web_flush_files=()=>(b._duckdb_web_flush_files=$t.za)(),b._duckdb_web_flush_file=e=>(b._duckdb_web_flush_file=$t.Aa)(e),b._duckdb_web_open=(e,t)=>(b._duckdb_web_open=$t.Ba)(e,t),b._duckdb_web_get_global_file_info=(e,t)=>(b._duckdb_web_get_global_file_info=$t.Ca)(e,t),b._duckdb_web_collect_file_stats=(e,t,r)=>(b._duckdb_web_collect_file_stats=$t.Da)(e,t,r),b._duckdb_web_export_file_stats=(e,t)=>(b._duckdb_web_export_file_stats=$t.Ea)(e,t),b._duckdb_web_fs_drop_file=(e,t)=>(b._duckdb_web_fs_drop_file=$t.Fa)(e,t),b._duckdb_web_fs_drop_files=e=>(b._duckdb_web_fs_drop_files=$t.Ga)(e),b._duckdb_web_fs_glob_file_infos=(e,t)=>(b._duckdb_web_fs_glob_file_infos=$t.Ha)(e,t),b._duckdb_web_fs_get_file_info_by_id=(e,t,r)=>(b._duckdb_web_fs_get_file_info_by_id=$t.Ia)(e,t,r),b._duckdb_web_fs_get_file_info_by_name=(e,t,r)=>(b._duckdb_web_fs_get_file_info_by_name=$t.Ja)(e,t,r),b._duckdb_web_fs_register_file_url=(e,t,r,n,a)=>(b._duckdb_web_fs_register_file_url=$t.Ka)(e,t,r,n,a),b._duckdb_web_fs_register_file_buffer=(e,t,r,n)=>(b._duckdb_web_fs_register_file_buffer=$t.La)(e,t,r,n),b._duckdb_web_copy_file_to_buffer=(e,t)=>(b._duckdb_web_copy_file_to_buffer=$t.Ma)(e,t),b._duckdb_web_copy_file_to_path=(e,t,r)=>(b._duckdb_web_copy_file_to_path=$t.Na)(e,t,r),b._duckdb_web_get_version=e=>(b._duckdb_web_get_version=$t.Oa)(e),b._duckdb_web_get_feature_flags=()=>(b._duckdb_web_get_feature_flags=$t.Pa)(),b._duckdb_web_tokenize=(e,t)=>(b._duckdb_web_tokenize=$t.Qa)(e,t),b._duckdb_web_udf_scalar_create=(e,t,r)=>(b._duckdb_web_udf_scalar_create=$t.Ra)(e,t,r),b._duckdb_web_prepared_create=(e,t,r)=>(b._duckdb_web_prepared_create=$t.Sa)(e,t,r),b._duckdb_web_prepared_close=(e,t,r)=>(b._duckdb_web_prepared_close=$t.Ta)(e,t,r),b._duckdb_web_prepared_run=(e,t,r,n)=>(b._duckdb_web_prepared_run=$t.Ua)(e,t,r,n),b._duckdb_web_prepared_send=(e,t,r,n)=>(b._duckdb_web_prepared_send=$t.Va)(e,t,r,n),b._duckdb_web_query_run=(e,t,r)=>(b._duckdb_web_query_run=$t.Wa)(e,t,r),b._duckdb_web_pending_query_start=(e,t,r)=>(b._duckdb_web_pending_query_start=$t.Xa)(e,t,r),b._duckdb_web_pending_query_poll=(e,t,r)=>(b._duckdb_web_pending_query_poll=$t.Ya)(e,t,r),b._duckdb_web_pending_query_cancel=(e,t)=>(b._duckdb_web_pending_query_cancel=$t.Za)(e,t),b._duckdb_web_query_fetch_results=(e,t)=>(b._duckdb_web_query_fetch_results=$t._a)(e,t),b._duckdb_web_get_tablenames=(e,t,r)=>(b._duckdb_web_get_tablenames=$t.$a)(e,t,r),b._duckdb_web_insert_arrow_from_ipc_stream=(e,t,r,n,a)=>(b._duckdb_web_insert_arrow_from_ipc_stream=$t.ab)(e,t,r,n,a),b._duckdb_web_insert_csv_from_path=(e,t,r,n)=>(b._duckdb_web_insert_csv_from_path=$t.bb)(e,t,r,n),b._duckdb_web_insert_json_from_path=(e,t,r,n)=>(b._duckdb_web_insert_json_from_path=$t.cb)(e,t,r,n),b.__emscripten_tls_init=()=>(b.__emscripten_tls_init=$t.db)(),b._pthread_self=()=>(er=b._pthread_self=$t.eb)()),tr=b.__emscripten_thread_init=(e,t,r,n,a,o)=>(tr=b.__emscripten_thread_init=$t.fb)(e,t,r,n,a,o),rr=(b.__emscripten_thread_crashed=()=>(b.__emscripten_thread_crashed=$t.gb)(),e=>(rr=$t.hb)(e)),nr=e=>(nr=$t.ib)(e),ar=e=>(ar=$t.jb)(e),or=(e,t,r,n)=>(or=$t.kb)(e,t,r,n),ir=e=>(ir=$t.lb)(e),sr=b.__emscripten_thread_exit=e=>(sr=b.__emscripten_thread_exit=$t.mb)(e),lr=()=>(lr=$t.nb)(),ur=b._malloc=e=>(ur=b._malloc=$t.ob)(e),cr=(b._free=e=>(b._free=$t.pb)(e),()=>(cr=$t.qb)()),fr=(e,t)=>(fr=$t.rb)(e,t),dr=()=>(dr=$t.sb)(),hr=e=>(hr=$t.tb)(e),_r=e=>(_r=$t.ub)(e);function pr(){if(!(re>0)){if(T)return u(b),ee(),void startWorker(b);(function(){if(b.preRun)for("function"==typeof b.preRun&&(b.preRun=[b.preRun]);b.preRun.length;)te(b.preRun.shift());Se(J)})(),re>0||(b.setStatus?(b.setStatus("Running..."),setTimeout((function(){setTimeout((function(){b.setStatus("")}),1),e()}),1)):e())}function e(){Jt||(Jt=!0,b.calledRun=!0,!z&&(ee(),T||Se(Z),u(b),b.onRuntimeInitialized&&b.onRuntimeInitialized(),br&&function(){var e=Qt;try{var t=e(0,0);return Fe(t),t}catch(e){return He(e)}}(),function(){if(!T){if(b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;)e=b.postRun.shift(),$.unshift(e);Se($)}var e}()))}}if(b.wasmMemory=P,b.stackAlloc=_r,b.stackSave=dr,b.stackRestore=hr,b.keepRuntimeAlive=ve,b.ccall=(e,t,r,n,a)=>{var o={string:e=>{var t=0;return null!=e&&0!==e&&(t=(e=>{var t=Gt(e)+1,r=_r(t);return ot(e,r,t),r})(e)),t},array:e=>{var t=_r(e.length);return Yt(e,t),t}},i=(e=>b["_"+e])(e),s=[],l=0;if(n)for(var u=0;u<n.length;u++){var c=o[r[u]];c?(0===l&&(l=dr()),s[u]=c(n[u])):s[u]=n[u]}var f,d=i.apply(null,s);return f=d,0!==l&&hr(l),d=function(e){return"string"===t?Ee(e):"boolean"===t?!!e:e}(f),d},b.ExitStatus=pe,b.PThread=Ie,ae=function e(){Jt||pr(),Jt||(ae=e)},b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);b.preInit.length>0;)b.preInit.pop()();var br=!0;return b.noInitialRun&&(br=!1),pr(),t.ready}})();"object"==typeof e&&"object"==typeof t?t.exports=r:"function"==typeof define&&define.amd&&define([],(()=>r))})),b=l((()=>{})),g=l((()=>{})),m=l(((e,t)=>{!function(){var e="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA256_NO_WINDOW&&(r=!1);var a=!r&&"object"==typeof self,o=!n.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;o?n=global:a&&(n=self);var i=!n.JS_SHA256_NO_COMMON_JS&&"object"==typeof t&&t.exports,s="function"==typeof define&&define.amd,l=!n.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",u="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],f=[24,16,8,0],d=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],h=["hex","array","digest","arrayBuffer"],_=[];(n.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),l&&(n.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var p=function(e,t){return function(r){return new A(t,!0).update(r)[e]()}},m=function(e){var t=p("hex",e);o&&(t=y(t,e)),t.create=function(){return new A(e)},t.update=function(e){return t.create().update(e)};for(var r=0;r<h.length;++r){var n=h[r];t[n]=p(n,e)}return t},y=function(t,r){var a,o=b(),i=g().Buffer,s=r?"sha224":"sha256";return a=i.from&&!n.JS_SHA256_NO_BUFFER_FROM?i.from:function(e){return new i(e)},function(r){if("string"==typeof r)return o.createHash(s).update(r,"utf8").digest("hex");if(null==r)throw new Error(e);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===i?o.createHash(s).update(a(r)).digest("hex"):t(r)}},w=function(e,t){return function(r,n){return new k(r,t,!0).update(n)[e]()}},v=function(e){var t=w("hex",e);t.create=function(t){return new k(t,e)},t.update=function(e,r){return t.create(e).update(r)};for(var r=0;r<h.length;++r){var n=h[r];t[n]=w(n,e)}return t};function A(e,t){t?(_[0]=_[16]=_[1]=_[2]=_[3]=_[4]=_[5]=_[6]=_[7]=_[8]=_[9]=_[10]=_[11]=_[12]=_[13]=_[14]=_[15]=0,this.blocks=_):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}function k(t,r,n){var a,o=typeof t;if("string"===o){var i,s=[],u=t.length,c=0;for(a=0;a<u;++a)(i=t.charCodeAt(a))<128?s[c++]=i:i<2048?(s[c++]=192|i>>6,s[c++]=128|63&i):i<55296||i>=57344?(s[c++]=224|i>>12,s[c++]=128|i>>6&63,s[c++]=128|63&i):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++a)),s[c++]=240|i>>18,s[c++]=128|i>>12&63,s[c++]=128|i>>6&63,s[c++]=128|63&i);t=s}else{if("object"!==o)throw new Error(e);if(null===t)throw new Error(e);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(e)}t.length>64&&(t=new A(r,!0).update(t).array());var f=[],d=[];for(a=0;a<64;++a){var h=t[a]||0;f[a]=92^h,d[a]=54^h}A.call(this,r,n),this.update(d),this.oKeyPad=f,this.inner=!0,this.sharedMemory=n}A.prototype.update=function(t){if(!this.finalized){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(l&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||l&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var a,o,i=0,s=t.length,u=this.blocks;i<s;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),r)for(o=this.start;i<s&&o<64;++i)u[o>>2]|=t[i]<<f[3&o++];else for(o=this.start;i<s&&o<64;++i)(a=t.charCodeAt(i))<128?u[o>>2]|=a<<f[3&o++]:a<2048?(u[o>>2]|=(192|a>>6)<<f[3&o++],u[o>>2]|=(128|63&a)<<f[3&o++]):a<55296||a>=57344?(u[o>>2]|=(224|a>>12)<<f[3&o++],u[o>>2]|=(128|a>>6&63)<<f[3&o++],u[o>>2]|=(128|63&a)<<f[3&o++]):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++i)),u[o>>2]|=(240|a>>18)<<f[3&o++],u[o>>2]|=(128|a>>12&63)<<f[3&o++],u[o>>2]|=(128|a>>6&63)<<f[3&o++],u[o>>2]|=(128|63&a)<<f[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=u[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},A.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=c[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},A.prototype.hash=function(){var e,t,r,n,a,o,i,s,l,u=this.h0,c=this.h1,f=this.h2,h=this.h3,_=this.h4,p=this.h5,b=this.h6,g=this.h7,m=this.blocks;for(e=16;e<64;++e)t=((a=m[e-15])>>>7|a<<25)^(a>>>18|a<<14)^a>>>3,r=((a=m[e-2])>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,m[e]=m[e-16]+t+m[e-7]+r<<0;for(l=c&f,e=0;e<64;e+=4)this.first?(this.is224?(o=300032,g=(a=m[0]-1413257819)-150054599<<0,h=a+24177077<<0):(o=704751109,g=(a=m[0]-210244248)-1521486534<<0,h=a+143694565<<0),this.first=!1):(t=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),n=(o=u&c)^u&f^l,g=h+(a=g+(r=(_>>>6|_<<26)^(_>>>11|_<<21)^(_>>>25|_<<7))+(_&p^~_&b)+d[e]+m[e])<<0,h=a+(t+n)<<0),t=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),n=(i=h&u)^h&c^o,b=f+(a=b+(r=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&_^~g&p)+d[e+1]+m[e+1])<<0,t=((f=a+(t+n)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),n=(s=f&h)^f&u^i,p=c+(a=p+(r=(b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7))+(b&g^~b&_)+d[e+2]+m[e+2])<<0,t=((c=a+(t+n)<<0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),n=(l=c&f)^c&h^s,_=u+(a=_+(r=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&b^~p&g)+d[e+3]+m[e+3])<<0,u=a+(t+n)<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+u<<0,this.h1=this.h1+c<<0,this.h2=this.h2+f<<0,this.h3=this.h3+h<<0,this.h4=this.h4+_<<0,this.h5=this.h5+p<<0,this.h6=this.h6+b<<0,this.h7=this.h7+g<<0},A.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,i=this.h6,s=this.h7,l=u[e>>28&15]+u[e>>24&15]+u[e>>20&15]+u[e>>16&15]+u[e>>12&15]+u[e>>8&15]+u[e>>4&15]+u[15&e]+u[t>>28&15]+u[t>>24&15]+u[t>>20&15]+u[t>>16&15]+u[t>>12&15]+u[t>>8&15]+u[t>>4&15]+u[15&t]+u[r>>28&15]+u[r>>24&15]+u[r>>20&15]+u[r>>16&15]+u[r>>12&15]+u[r>>8&15]+u[r>>4&15]+u[15&r]+u[n>>28&15]+u[n>>24&15]+u[n>>20&15]+u[n>>16&15]+u[n>>12&15]+u[n>>8&15]+u[n>>4&15]+u[15&n]+u[a>>28&15]+u[a>>24&15]+u[a>>20&15]+u[a>>16&15]+u[a>>12&15]+u[a>>8&15]+u[a>>4&15]+u[15&a]+u[o>>28&15]+u[o>>24&15]+u[o>>20&15]+u[o>>16&15]+u[o>>12&15]+u[o>>8&15]+u[o>>4&15]+u[15&o]+u[i>>28&15]+u[i>>24&15]+u[i>>20&15]+u[i>>16&15]+u[i>>12&15]+u[i>>8&15]+u[i>>4&15]+u[15&i];return this.is224||(l+=u[s>>28&15]+u[s>>24&15]+u[s>>20&15]+u[s>>16&15]+u[s>>12&15]+u[s>>8&15]+u[s>>4&15]+u[15&s]),l},A.prototype.toString=A.prototype.hex,A.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,i=this.h6,s=this.h7,l=[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o,i>>24&255,i>>16&255,i>>8&255,255&i];return this.is224||l.push(s>>24&255,s>>16&255,s>>8&255,255&s),l},A.prototype.array=A.prototype.digest,A.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e},k.prototype=new A,k.prototype.finalize=function(){if(A.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();A.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),A.prototype.finalize.call(this)}};var E=m();E.sha256=E,E.sha224=m(!0),E.sha256.hmac=v(),E.sha224.hmac=v(!0),i?t.exports=E:(n.sha256=E.sha256,n.sha224=E.sha224,s&&define((function(){return E})))}()})),y={},w="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;w&&(v=c(),(A=v.parentPort).on("message",(e=>M({data:e}))),k=f(),E=["vm"].map(s),Object.assign(global,{self:global,require:s,Module:y,location:{href:__filename},Worker:v.Worker,importScripts:e=>E.runInThisContext(k.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>A.postMessage(e),performance:global.performance||{now:Date.now}}));var v,A,k,E,T=!1,U=function(){var e=Array.prototype.slice.call(arguments).join(" ");w?k.writeSync(2,e+"\n"):console.error(e)};self.alert=function(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:y._pthread_self()})},y.instantiateWasm=(e,t)=>{var r=y.wasmModule;return y.wasmModule=null,t(new WebAssembly.Instance(r,e))},self.onunhandledrejection=e=>{throw e.reason||e},self.onmessage=function e(t){var r;try{if("load"===t.data.cmd){let r=[];self.onmessage=e=>r.push(e),self.startWorker=t=>{y=t,postMessage({cmd:"loaded"});for(let t of r)e(t);self.onmessage=e},y.wasmModule=t.data.wasmModule;for(let e of t.data.handlers)y[e]=(...t)=>{postMessage({cmd:"callHandler",handler:e,args:t})};if(y.wasmMemory=t.data.wasmMemory,y.buffer=y.wasmMemory.buffer,y.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var n=URL.createObjectURL(t.data.urlOrBlob);importScripts(n),URL.revokeObjectURL(n)}DuckDB(y)}else if("run"===t.data.cmd){y.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),y.__emscripten_thread_mailbox_await(t.data.pthread_ptr),y.establishStackSpace(),y.PThread.receiveObjectTransfer(t.data),y.PThread.threadInitTLS(),T||(T=!0);try{y.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(e){if("unwind"!=e)throw e}}else"cancel"===t.data.cmd?y._pthread_self()&&y.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("checkMailbox"===t.data.cmd?T&&y.checkMailbox():t.data.cmd&&(U("worker.js received unknown command ".concat(t.data.cmd)),U(t.data)))}catch(e){throw null==(r=y.__emscripten_thread_crashed)||r.call(y),e}};var M=self.onmessage,D=u(p()),F=u(m()),R=function(e,t,r){var n;if(null!=(n=null==e?void 0:e.endpoint)&&n.startsWith("http")){let t="".concat(null==e?void 0:e.endpoint),r=t.indexOf("://")+3;return t.substring(r)}return null!=e&&e.endpoint?"".concat(r,".").concat(null==e?void 0:e.endpoint):"".concat(r,".s3.amazonaws.com")};function H(e,t,r,n,a=null,o=null){(null!=t&&t.accessKeyId||null!=t&&t.sessionToken)&&(function(e,t,r,n=null,a=null){let o=function(e,t,r){var n,a,o,i;let s=I(t),l=s.path;return S(e)&&(l="/".concat(s.bucket).concat(l)),{url:l,query:"",host:R(e,0,s.bucket),region:null!=(n=null==e?void 0:e.region)?n:"",service:"s3",method:r,accessKeyId:null!=(a=null==e?void 0:e.accessKeyId)?a:"",secretAccessKey:null!=(o=null==e?void 0:e.secretAccessKey)?o:"",sessionToken:null!=(i=null==e?void 0:e.sessionToken)?i:"",dateNow:(new Date).toISOString().replace(/-/g,"").split("T")[0],datetimeNow:(new Date).toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}(e,t,r);return function(e,t=null){var r;let n=null!=(r=null==t?void 0:t.contentHash)?r:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",a=new Map;a.set("x-amz-date",e.datetimeNow),a.set("x-amz-content-sha256",n),e.sessionToken&&a.set("x-amz-security-token",e.sessionToken);let o="";null!=t&&t.contentType&&(o+="content-type;"),o+="host;x-amz-content-sha256;x-amz-date",e.sessionToken&&(o+=";x-amz-security-token");let i=e.method+"\n"+function(e,t=!1){let r="0123456789ABCDEF",n="";for(let a=0;a<e.length;a++){let o=e[a];o>="A"&&o<="Z"||o>="a"&&o<="z"||o>="0"&&o<="9"||"_"==o||"-"==o||"~"==o||"."==o?n+=o:"/"==o?n+=t?"%2F":o:(n+="%",n+=r[o.charCodeAt(0)>>4],n+=r[15&o.charCodeAt(0)])}return n}(e.url)+"\n"+e.query;null!=t&&t.contentType&&(i+="\ncontent-type:"+(null==t?void 0:t.contentType)),i+="\nhost:"+e.host+"\nx-amz-content-sha256:"+n+"\nx-amz-date:"+e.datetimeNow,e.sessionToken&&e.sessionToken.length>0&&(i+="\nx-amz-security-token:"+e.sessionToken),i+="\n\n"+o+"\n"+n;let s=(0,F.sha256)(i),l="AWS4-HMAC-SHA256\n"+e.datetimeNow+"\n"+e.dateNow+"/"+e.region+"/"+e.service+"/aws4_request\n"+s,u="AWS4"+e.secretAccessKey,c=F.sha256.hmac.arrayBuffer(u,e.dateNow),f=F.sha256.hmac.arrayBuffer(c,e.region),d=F.sha256.hmac.arrayBuffer(f,e.service),h=F.sha256.hmac.arrayBuffer(d,"aws4_request"),_=F.sha256.hmac(h,l);return a.set("Authorization","AWS4-HMAC-SHA256 Credential="+e.accessKeyId+"/"+e.dateNow+"/"+e.region+"/"+e.service+"/aws4_request, SignedHeaders="+o+", Signature="+_),a}(o,{contentType:n,contentHash:a?F.sha256.hex(a):null})}(t,r,n,a,o).forEach(((t,r)=>{e.setRequestHeader(r,t)})),a&&e.setRequestHeader("content-type",a))}function I(e){if(0!=e.indexOf("s3://"))throw new Error("URL needs to start with s3://");let t=e.indexOf("/",5);if(-1==t)throw new Error("URL needs to contain a '/' after the host");let r=e.substring(5,t);if(!r)throw new Error("URL needs to contain a bucket name");let n=e.substring(t);if(!n)throw new Error("URL needs to contain key");return{bucket:r,path:n}}function S(e){var t;return!(null==(t=null==e?void 0:e.endpoint)||!t.startsWith("http"))}function N(e,t){let r=I(t);return S(e)?"".concat(null==e?void 0:e.endpoint,"/").concat(r.bucket)+r.path:"https://"+R(e,0,r.bucket)+r.path}var P=new TextEncoder,C=new TextDecoder("utf-8");function O(e,t,r){let n=P.encode(r),a=e._malloc(n.byteLength),o=e.HEAPU8.subarray(a,a+n.byteLength);o.set(n),e.HEAPF64[0+(t>>3)]=1,e.HEAPF64[1+(t>>3)]=a,e.HEAPF64[2+(t>>3)]=o.byteLength}function B(e){switch(e){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function x(e,t,r,n){let a=e.HEAPU8.subarray(t,t+n*B(r));switch(r){case"UINT8":return new Uint8Array(a.buffer,a.byteOffset,n);case"INT8":return new Int8Array(a.buffer,a.byteOffset,n);case"INT32":return new Int32Array(a.buffer,a.byteOffset,n);case"FLOAT":return new Float32Array(a.buffer,a.byteOffset,n);case"DOUBLE":case"VARCHAR":return new Float64Array(a.buffer,a.byteOffset,n);default:return new Array(0)}}function W(e,t,r){let n=e.HEAPU8.subarray(t,t+r);return new Uint8Array(n.buffer,n.byteOffset,r)}function L(e,t,r){let n=e.HEAPU8.subarray(t,t+8*r);return new Float64Array(n.buffer,n.byteOffset,r)}var q=function(){let e=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),e.decode(t))}();function j(e,t){console.error("FAIL WITH: ".concat(t)),e.ccall("duckdb_web_fail_with",null,["string"],[t])}function K(e,t,r){return q(e.HEAPU8.subarray(t,t+r))}function z(e,t,r,n){let a=e.stackSave(),o=e.stackAlloc(24);r.unshift("number"),n.unshift(o),e.ccall(t,null,r,n);let i=e.HEAPF64[0+(o>>3)],s=e.HEAPF64[1+(o>>3)],l=e.HEAPF64[2+(o>>3)];return e.stackRestore(a),[i,s,l]}function G(e){e.ccall("duckdb_web_clear_response",null,[],[])}var Y={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,getFileInfo(e,t){try{let r=Y._fileInfoCache.get(t),[n,a,o]=z(e,"duckdb_web_fs_get_file_info_by_id",["number","number"],[t,(null==r?void 0:r.cacheEpoch)||0]);if(0!==n)return null;if(0===o)return r;let i=K(e,a,o);G(e);let s=JSON.parse(i);if(null==s)return null;let l={...s,blob:null};return Y._fileInfoCache.set(t,l),l}catch(e){return console.log(e),null}},getGlobalFileInfo(e){var t;try{let[r,n,a]=z(e,"duckdb_web_get_global_file_info",["number"],[(null==(t=Y._globalFileInfo)?void 0:t.cacheEpoch)||0]);if(0!==r)return null;if(0===a)return Y._globalFileInfo;let o=K(e,n,a);G(e);let i=JSON.parse(o);return null==i?null:(Y._globalFileInfo={...i,blob:null},Y._globalFileInfo)}catch(e){return console.log(e),null}},testPlatformFeature:(e,t)=>1===t?typeof BigInt64Array<"u":(console.warn("test for unknown feature: ".concat(t)),!1),getDefaultDataProtocol:e=>2,openFile:(e,t,r)=>{var n;try{Y._fileInfoCache.delete(t);let a=Y.getFileInfo(e,t);switch(null==a?void 0:a.dataProtocol){case 4:case 5:{if(1&r&&2&r)throw new Error("Opening file ".concat(a.fileName," failed: cannot open file with both read and write flags set"));if(32&r)throw new Error("Opening file ".concat(a.fileName," failed: appending to HTTP/S3 files is not supported"));if(2&r){let t=new XMLHttpRequest;if(5==a.dataProtocol?(t.open("HEAD",N(a.s3Config,a.dataUrl),!1),H(t,a.s3Config,a.dataUrl,"HEAD")):t.open("HEAD",a.dataUrl,!1),t.send(null),200!=t.status&&404!=t.status)throw new Error("Opening file ".concat(a.fileName," failed: Unexpected return status from server (").concat(t.status,")"));if(404==t.status&&!(8&r||16&r))throw new Error("Opening file ".concat(a.fileName," failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag."));let n=e._malloc(1),o=new Uint8Array;e.HEAPU8.set(o,n);let i=e._malloc(16);return e.HEAPF64[0+(i>>3)]=1,e.HEAPF64[1+(i>>3)]=n,i}if(1!=r)throw new Error("Opening file ".concat(a.fileName," failed: unsupported file flags: ").concat(r));let t=null,n=null;try{let r=new XMLHttpRequest;if(5==a.dataProtocol?(r.open("HEAD",N(a.s3Config,a.dataUrl),!1),H(r,a.s3Config,a.dataUrl,"HEAD")):r.open("HEAD",a.dataUrl,!1),r.setRequestHeader("Range","bytes=0-"),r.send(null),t=r.getResponseHeader("Content-Length"),null!==t&&206==r.status){let r=e._malloc(16);return e.HEAPF64[0+(r>>3)]=+t,e.HEAPF64[1+(r>>3)]=0,r}}catch(e){n=e,console.warn("HEAD request with range header failed: ".concat(e))}if(a.allowFullHttpReads){if(null!==t&&+t>1){let r=new XMLHttpRequest;5==a.dataProtocol?(r.open("GET",N(a.s3Config,a.dataUrl),!1),H(r,a.s3Config,a.dataUrl,"GET")):r.open("GET",a.dataUrl,!1),r.responseType="arraybuffer",r.setRequestHeader("Range","bytes=0-0"),r.send(null);let n=r.getResponseHeader("Content-Length");if(206==r.status&&null!==n&&1==+n){let r=e._malloc(16);return e.HEAPF64[0+(r>>3)]=+t,e.HEAPF64[1+(r>>3)]=0,r}if(200==r.status&&null!==n&&+n==+t){console.warn("fall back to full HTTP read for: ".concat(a.dataUrl));let t=e._malloc(r.response.byteLength),n=new Uint8Array(r.response,0,r.response.byteLength);e.HEAPU8.set(n,t);let o=e._malloc(16);return e.HEAPF64[0+(o>>3)]=r.response.byteLength,e.HEAPF64[1+(o>>3)]=t,o}}console.warn("falling back to full HTTP read for: ".concat(a.dataUrl));let r=new XMLHttpRequest;if(5==a.dataProtocol?(r.open("GET",N(a.s3Config,a.dataUrl),!1),H(r,a.s3Config,a.dataUrl,"GET")):r.open("GET",a.dataUrl,!1),r.responseType="arraybuffer",r.send(null),200==r.status){let t=e._malloc(r.response.byteLength),n=new Uint8Array(r.response,0,r.response.byteLength);e.HEAPU8.set(n,t);let a=e._malloc(16);return e.HEAPF64[0+(a>>3)]=r.response.byteLength,e.HEAPF64[1+(a>>3)]=t,a}}if(null!=n)throw new Error("Reading file ".concat(a.fileName," failed with error: ").concat(n));return 0}case 2:{let t=null==(n=Y._files)?void 0:n.get(a.fileName);if(t){let r=e._malloc(16);return e.HEAPF64[0+(r>>3)]=t.size,e.HEAPF64[1+(r>>3)]=0,r}console.warn("Buffering missing file: ".concat(a.fileName));let r=e._malloc(16),o=e._malloc(1);return e.HEAPF64[0+(r>>3)]=1,e.HEAPF64[1+(r>>3)]=o,r}}}catch(t){console.error(t.toString()),j(e,t.toString())}return 0},glob:(e,t,r)=>{var n;try{let a=K(e,t,r);if(a.startsWith("http")||a.startsWith("s3://")){let t=new XMLHttpRequest;if(a.startsWith("s3://")){let r=Y.getGlobalFileInfo(e);t.open("HEAD",N(null==r?void 0:r.s3Config,a),!1),H(t,null==r?void 0:r.s3Config,a,"HEAD")}else t.open("HEAD",a,!1);if(t.send(null),200!=t.status&&206!==t.status){if(null==(n=Y.getGlobalFileInfo(e))||!n.allowFullHttpReads)return void j(e,"HEAD request failed: ".concat(a,", with full http reads are disabled"));let t=new XMLHttpRequest;if(a.startsWith("s3://")){let r=Y.getGlobalFileInfo(e);t.open("GET",N(null==r?void 0:r.s3Config,a),!1),H(t,null==r?void 0:r.s3Config,a,"HEAD")}else t.open("GET",a,!1);if(t.setRequestHeader("Range","bytes=0-0"),t.send(null),200!=t.status&&206!==t.status)return void j(e,"HEAD and GET requests failed: ".concat(a));let r=t.getResponseHeader("Content-Length");r&&+r>1&&console.warn("Range request for ".concat(a," did not return a partial response: ").concat(t.status,' "').concat(t.statusText,'"'))}e.ccall("duckdb_web_fs_glob_add_path",null,["string"],[a])}}catch(t){return console.log(t),j(e,t.toString()),0}},checkFile:(e,t,r)=>{try{let n=K(e,t,r);if(n.startsWith("http")||n.startsWith("s3://")){let t=new XMLHttpRequest;if(n.startsWith("s3://")){let r=Y.getGlobalFileInfo(e);t.open("HEAD",N(null==r?void 0:r.s3Config,n),!1),H(t,null==r?void 0:r.s3Config,n,"HEAD")}else t.open("HEAD",n,!1);return t.send(null),206==t.status||200==t.status}}catch(e){return console.log(e),!1}return!1},syncFile:(e,t)=>{},closeFile:(e,t)=>{var r;let n=Y.getFileInfo(e,t);switch(Y._fileInfoCache.delete(t),null==n?void 0:n.dataProtocol){case 0:case 4:case 5:break;case 1:case 2:return;case 3:{let e=null==(r=Y._files)?void 0:r.get(n.fileName);if(!e)throw new Error("No OPFS access handle registered with name: ".concat(n.fileName));return e.flush()}}},truncateFile:(e,t,r)=>{var n;let a=Y.getFileInfo(e,t);switch(null==a?void 0:a.dataProtocol){case 4:return void j(e,"Cannot truncate a http file");case 5:return void j(e,"Cannot truncate an s3 file");case 0:case 1:case 2:return void j(e,"truncateFile not implemented");case 3:{let e=null==(n=Y._files)?void 0:n.get(a.fileName);if(!e)throw new Error("No OPFS access handle registered with name: ".concat(a.fileName));return e.truncate(r)}}return 0},readFile(e,t,r,n,a){var o,i;if(0==n)return 0;try{let s=Y.getFileInfo(e,t);switch(null==s?void 0:s.dataProtocol){case 4:case 5:if(!s.dataUrl)throw new Error("Missing data URL for file ".concat(t));try{let t=new XMLHttpRequest;if(5==s.dataProtocol?(t.open("GET",N(null==s?void 0:s.s3Config,s.dataUrl),!1),H(t,null==s?void 0:s.s3Config,s.dataUrl,"GET")):t.open("GET",s.dataUrl,!1),t.responseType="arraybuffer",t.setRequestHeader("Range","bytes=".concat(a,"-").concat(a+n-1)),t.send(null),206==t.status||200==t.status&&n==t.response.byteLength&&0==a){let a=new Uint8Array(t.response,0,Math.min(t.response.byteLength,n));return e.HEAPU8.set(a,r),a.byteLength}if(200==t.status){console.warn("Range request for ".concat(s.dataUrl," did not return a partial response: ").concat(t.status,' "').concat(t.statusText,'"'));let o=new Uint8Array(t.response,a,Math.min(t.response.byteLength-a,n));return e.HEAPU8.set(o,r),o.byteLength}throw new Error("Range request for ".concat(s.dataUrl," did returned non-success status: ").concat(t.status,' "').concat(t.statusText,'"'))}catch(e){throw console.log(e),new Error("Range request for ".concat(s.dataUrl," failed with error: ").concat(e,'"'))}case 2:{let t=null==(o=Y._files)?void 0:o.get(s.fileName);if(!t)throw new Error("No HTML5 file registered with name: ".concat(s.fileName));let i=t.slice(a,a+n),l=new Uint8Array((new FileReaderSync).readAsArrayBuffer(i));return e.HEAPU8.set(l,r),l.byteLength}case 3:{let t=null==(i=Y._files)?void 0:i.get(s.fileName);if(!t)throw new Error("No OPFS access handle registered with name: ".concat(s.fileName));let o=e.HEAPU8.subarray(r,r+n);return t.read(o,{at:a})}}return 0}catch(t){return console.log(t),j(e,t.toString()),0}},writeFile:(e,t,r,n,a)=>{var o;let i=Y.getFileInfo(e,t);switch(null==i?void 0:i.dataProtocol){case 4:return j(e,"Cannot write to HTTP file"),0;case 5:{let t=e.HEAPU8.subarray(r,r+n),a=new XMLHttpRequest;return a.open("PUT",N(null==i?void 0:i.s3Config,i.dataUrl),!1),H(a,null==i?void 0:i.s3Config,i.dataUrl,"PUT","",t),a.send(t),200!==a.status?(j(e,"Failed writing file: HTTP "+a.status),0):n}case 2:return j(e,"cannot write using the html5 file reader api"),0;case 3:{let t=null==(o=Y._files)?void 0:o.get(i.fileName);if(!t)throw new Error("No OPFS access handle registered with name: ".concat(i.fileName));let s=e.HEAPU8.subarray(r,r+n);return t.write(s,{at:a})}}return 0},getLastFileModificationTime:(e,t)=>{var r;let n=Y.getFileInfo(e,t);switch(null==n?void 0:n.dataProtocol){case 2:if(!(null==(r=Y._files)?void 0:r.get(n.fileName)))throw Error("No handle available for file: ".concat(n.fileName));return 0;case 4:case 5:return(new Date).getTime()}return 0},checkDirectory:(e,t,r)=>{let n=K(e,t,r);return console.log("checkDirectory: ".concat(n)),!1},createDirectory:(e,t,r)=>{let n=K(e,t,r);console.log("createDirectory: ".concat(n))},removeDirectory:(e,t,r)=>{let n=K(e,t,r);console.log("removeDirectory: ".concat(n))},listDirectoryEntries:(e,t,r)=>{let n=K(e,t,r);return console.log("listDirectoryEntries: ".concat(n)),!1},moveFile:(e,t,r,n,a)=>{var o,i;let s=K(e,t,r),l=K(e,n,a),u=null==(o=Y._files)?void 0:o.get(s);void 0!==u&&(Y._files.delete(u),Y._files.set(l,u));for(let[e,t]of(null==(i=Y._fileInfoCache)?void 0:i.entries())||[])if(t.dataUrl==s){Y._fileInfoCache.delete(e);break}return!0},removeFile:(e,t,r)=>{},callScalarUDF:(e,t,r,n,a,o,i)=>{!function(e,t,r,n,a,o,i,s){try{let l=e._udfFunctions.get(n);if(!l)return void O(t,r,"Unknown UDF with id: "+n);let u=C.decode(t.HEAPU8.subarray(a,a+o)),c=JSON.parse(u),f=L(t,i,s/8),d=e=>{var r;let n=null;switch(void 0!==e.validityBuffer&&(n=W(t,f[e.validityBuffer],c.rows)),e.physicalType){case"VARCHAR":{if(null===e.dataBuffer||void 0===e.dataBuffer)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(null===e.lengthBuffer||void 0===e.lengthBuffer)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let r=x(t,f[e.dataBuffer],e.physicalType,c.rows),a=[],o=L(t,f[e.lengthBuffer],c.rows);for(let e=0;e<c.rows;++e){if(null!=n&&!n[e]){a.push(null);continue}let i=t.HEAPU8.subarray(r[e],r[e]+o[e]),s=C.decode(i);a.push(s)}return e=>a[e]}case"STRUCT":{let t={},a=[];for(let n=0;n<((null==(r=e.children)?void 0:r.length)||0);++n){let r=e.children[n],o=d(r);a.push((e=>{t[r.name]=o(e)}))}return null!=n?e=>{if(!n[e])return null;for(let t of a)t(e);return t}:e=>{for(let t of a)t(e);return t}}default:{if(void 0===e.dataBuffer)throw new Error("malformed data view, expected data buffer for argument of type: "+e.physicalType);let r=x(t,f[e.dataBuffer],e.physicalType,c.rows);return null!=n?e=>n[e]?r[e]:null:e=>r[e]}}},h=[];for(let e=0;e<c.args.length;++e)h.push(d(c.args[e]));let _=c.rows*B(c.ret.physicalType),p=t._malloc(_),b=x(t,p,c.ret.physicalType,c.rows),g=t._malloc(c.rows),m=W(t,g,c.rows);if(0==b.length||0==m.length)return void O(t,r,"Can't create physical arrays for result");let y=b;"VARCHAR"==c.ret.physicalType&&(y=new Array(c.rows));let w=[];for(let e=0;e<c.args.length;++e)w.push(null);for(let e=0;e<c.rows;++e){for(let t=0;t<c.args.length;++t)w[t]=h[t](e);let t=l.func(...w);y[e]=t,m[e]=null==t?0:1}let v=0;if("VARCHAR"===c.ret.physicalType){let e=new Array(0);v=t._malloc(c.rows*B("DOUBLE"));let r=L(t,v,c.rows),n=0;for(let t=0;t<c.rows;++t){let a=P.encode(y[t]||"");e.push(a),r[t]=a.length,n+=a.length}let a=t._malloc(n),o=t.HEAPU8.subarray(a,a+n),i=0;for(let t=0;t<c.rows;++t){b[t]=i;let r=e[t];o.subarray(i,i+r.length).set(r),i+=r.length}}let A=24,k=t._malloc(A),E=L(t,k,3);E[0]=p,E[1]=g,E[2]=v,t.HEAPF64[0+(r>>3)]=0,t.HEAPF64[1+(r>>3)]=k,t.HEAPF64[2+(r>>3)]=0}catch(e){O(t,r,e.toString())}}(Y,e,t,r,n,a,o,i)}};globalThis.DUCKDB_RUNTIME={};for(let e of Object.getOwnPropertyNames(Y))"constructor"!=e&&(globalThis.DUCKDB_RUNTIME[e]=Object.getOwnPropertyDescriptor(Y,e).value);globalThis.onmessage=e=>{if("load"===e.data.cmd){let t=y;globalThis.startWorker=e=>{t=e,postMessage({cmd:"loaded"})},t.wasmModule=e.data.wasmModule,t.wasmMemory=e.data.wasmMemory,t.buffer=t.wasmMemory.buffer,t.ENVIRONMENT_IS_PTHREAD=!0,(0,D.default)(t).then((e=>{!function(e){y=e}(e)}))}else if("registerFileHandle"===e.data.cmd)globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.set(e.data.fileName,e.data.fileHandle);else if("dropFileHandle"===e.data.cmd)globalThis.DUCKDB_RUNTIME._files=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._files.delete(e.data.fileName);else if("registerUDFFunction"===e.data.cmd)globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map,globalThis.DUCKDB_RUNTIME._udfFunctions.set(e.data.udf.name,e.data.udf);else if("dropUDFFunctions"===e.data.cmd){globalThis.DUCKDB_RUNTIME._udfFunctions=globalThis.DUCKDB_RUNTIME._files||new Map;for(let t of globalThis.DUCKDB_RUNTIME._udfFunctions.keys())globalThis.DUCKDB_RUNTIME._udfFunctions.get(t).connection_id==e.data.connectionId&&globalThis.DUCKDB_RUNTIME._udfFunctions.delete(t)}else M(e)}})();